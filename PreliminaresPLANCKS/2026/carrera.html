<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Carrera de Delegaciones</title>
    <style>
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background-color: #f4f4f4;
            margin: 0;
            padding: 20px;
            overflow-x: hidden; /* Evitar scroll horizontal */
        }

        h2 { text-align: center; color: #333; }

        /* Contenedor de la pista */
        .pista-container {
            width: 100%;
            max-width: 800px;
            margin: 0 auto;
            background: white;
            padding: 20px;
            border-radius: 10px;
            box-shadow: 0 4px 6px rgba(0,0,0,0.1);
            border-right: 5px dashed #333; /* L칤nea de meta visual */
            position: relative;
        }

        /* Etiqueta de META */
        .meta-label {
            position: absolute;
            right: -35px;
            top: 50%;
            transform: translateY(-50%) rotate(90deg);
            font-weight: bold;
            color: #333;
            letter-spacing: 2px;
        }

        /* Carril individual */
        .carril {
            display: flex;
            align-items: center;
            margin-bottom: 15px;
            border-bottom: 1px solid #eee;
            padding-bottom: 5px;
            position: relative;
            height: 50px; /* Altura del carril */
        }

        /* Nombre de la delegaci칩n a la izquierda */
        .nombre-delegacion {
            width: 100px;
            font-weight: bold;
            font-size: 14px;
            color: #555;
            flex-shrink: 0; /* No encoger */
        }

        /* El 치rea por donde corre el animal */
        .area-corrida {
            flex-grow: 1;
            position: relative;
            height: 100%;
        }

        /* El contenedor del animal que se mueve */
        .corredor {
            position: absolute;
            top: 0;
            left: 0;
            height: 100%;
            display: flex;
            align-items: center;
            transition: width 1.5s ease-out; /* Animaci칩n suave */
            width: 0%; /* Empieza en 0 */
        }

        /* La imagen/mascota */
        .mascota-img {
            font-size: 30px; /* Tama침o si es emoji */
            width: 40px;     /* Tama침o si es imagen real */
            height: auto;
            position: absolute;
            right: 0; /* La imagen siempre al final de su barra */
            transform: translateX(50%); /* Centrar la imagen sobre su punto */
            z-index: 2;
        }
        
        /* Si usas im치genes reales, descomenta esto:
        img.mascota-img {
            width: 40px; 
            height: 40px;
            object-fit: contain;
        } 
        */

        /* Barra de progreso visual (opcional, detr치s del animal) */
        .barra {
            height: 4px;
            background: linear-gradient(90deg, #ff9a9e 0%, #fad0c4 99%, #fad0c4 100%);
            width: 100%;
            border-radius: 2px;
            position: relative;
            top: 2px;
        }

        /* Contador de equipos */
        .contador {
            position: absolute;
            right: -30px; /* Posici칩n encima o al lado del animal */
            top: -15px;
            background: #333;
            color: #fff;
            font-size: 10px;
            padding: 2px 5px;
            border-radius: 4px;
            opacity: 0;
            transition: opacity 0.3s;
        }

        .corredor:hover .contador {
            opacity: 1;
        }

    </style>
</head>
<body>

    <h2>游끠 Estado de las Inscripciones 游끠</h2>

    <div class="pista-container" id="pista">
        <div class="meta-label">META</div>
        </div>

    <script>
        // Funci칩n principal
        async function cargarCarrera() {
            try {
                // 1. Cargar los datos del archivo JSON
                // IMPORTANTE: Para que esto funcione en local, necesitas un servidor local
                // o subir los archivos a un hosting real debido a pol칤ticas de seguridad (CORS).
                const respuesta = await fetch('carrera.json');
                const datos = await respuesta.json();

                // 2. Encontrar el n칰mero m치ximo de equipos para calcular porcentajes
                // El que tenga m치s equipos ser치 el 100% (o 90% para dejar margen visual)
                const maxEquipos = Math.max(...datos.map(d => d.equipos));
                
                const contenedor = document.getElementById('pista');

                // 3. Crear los elementos HTML por cada delegaci칩n
                datos.forEach(dato => {
                    // Calcular porcentaje relativo al l칤der
                    // Si el l칤der tiene 50, y este tiene 25, ser치 el 50% del ancho
                    // Usamos 90% como m치ximo para que no se pegue totalmente al borde derecho
                    let porcentaje = 0;
                    if(maxEquipos > 0) {
                        porcentaje = (dato.equipos / maxEquipos) * 90;
                    }

                    // Si es una imagen real, cambiar el tag dentro de .mascota-img
                    // Ejemplo: <img src="${dato.imagen}" class="mascota-img">
                    const htmlCarril = `
                        <div class="carril">
                            <div class="nombre-delegacion">${dato.delegacion}</div>
                            <div class="area-corrida">
                                <div class="corredor" style="width: ${porcentaje}%">
                                    <div class="barra"></div>
                                    <div class="mascota-img">${dato.imagen}</div> 
                                    <div class="contador">${dato.equipos} equipos</div>
                                </div>
                            </div>
                        </div>
                    `;
                    
                    // Insertar en el HTML
                    contenedor.insertAdjacentHTML('beforeend', htmlCarril);
                });

            } catch (error) {
                console.error("Error al cargar los datos:", error);
                document.getElementById('pista').innerHTML = "<p>Error cargando la carrera. Verifica que datos.json existe.</p>";
            }
        }

        // Ejecutar al cargar
        cargarCarrera();
    </script>
</body>
</html>